@startuml
class Usuario {
-email:String
-sugerencias:List<Atuendo>
+recibirSugerencia(Atuendo atuendo):void
+notificar(String):void
+enviarMail(String):void
}

Usuario --> NotificationService 
Usuario --> MailSenderService 

class RepositorioDeUsuarios {
-usuarios:List<Usuarios>
+generarSugerenciaDiaria():void
}

RepositorioDeUsuarios --> "*" Usuario

note "Comprendemos  disparar el c√°lculo de sugerencias\n diarias como la cantidad de sugerencias\n que se van a enviar a todos los usuarios" as notaDeRepo
RepositorioDeUsuarios .left. notaDeRepo

class RepositorioDeAlertas {
-alertas:List<String>
+getAlertas():List<String>
+setAlertas(String):void
}

interface ServicioMeteorologico {
+obtenerAlertas(String ciudad):Alerta
}

ServicioMeteorologico .right.> RepositorioDeAlertas:"<<Usa>>"
ServicioMeteorologico ..> NotificadorDeClima

class AccuWeatherService implements ServicioMeteorologico {
-apiClimatico:AccuWeatherAPI
+obtenerAlertas(String ciudad):Alerta
}

AccuWeatherService --> AccuWeatherAPI

class AccuWeatherAPI {
+getWeather(String city):List<Map<String,Object>>
+getAlerts(String city):Map<String, List<String>> 
}

interface NotificadorDeClima {
+actualizar(List<String>):void
+desuscribirse(Usuario):void
+suscribirse(Usuario):void
}

class ActualizadorDeSugerencias implements NotificadorDeClima {
+actualizar(List<String>):void
+desuscribirse(Ciudad):void
+suscribirse(Ciudad):void
}

class NotificadorDeTormenta implements NotificadorDeClima {
+actualizar(List<String>):void
+desuscribirse(Usuario):void
+suscribirse(Usuario):void
}

class NotificadorDeGranizo implements NotificadorDeClima {
+actualizar(List<String>):void
+desuscribirse(Usuario):void
+suscribirse(Usuario):void
}

class Mailer implements NotificadorDeClima {
+actualizar(List<String>):void
+desuscribirse(Usuario):void
+suscribirse(Usuario):void
}

NotificadorDeClima --> Usuario

class NotificationService {
+notify(String):void
}

class MailSenderService {
+send(String,String):void
}

@enduml
